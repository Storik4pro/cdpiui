<?xml version="1.0" encoding="utf-8"?>
<ContentDialog
    x:Name="MainDialog"
    x:Class="CDPI_UI.Controls.Dialogs.ProxySetupUtil.SelectAppContentDialog"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:CDPI_UI.Controls.Dialogs.ProxySetupUtil"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    xmlns:l="using:WinUI3Localizer" xmlns:lcontrol="using:CDPI_UI"
    Title="Add application"
    DefaultButton="Primary"
    Style="{ThemeResource DefaultContentDialogStyle}"
    Padding="0">

    <ContentDialog.Resources>
        <ResourceDictionary>
            <x:Double x:Key="ContentDialogMaxWidth">800</x:Double>
        </ResourceDictionary>
    </ContentDialog.Resources>

    <Grid Height="300" Width="774">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="10"/>
            <ColumnDefinition Width="300"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="auto"/>
        </Grid.RowDefinitions>
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            <TextBlock l:Uids.Uid="ApplicationListTextBlock"/>
            <ListView x:Name="SelectedApplicationsListView" Margin="0 0 0 0" SelectionMode="None" Padding="0"
                      ItemContainerStyle="{StaticResource ListViewItemStretchStyle}" Grid.Row="1">
                <ListView.ItemTemplate>
                    <DataTemplate x:DataType="local:ApplicationInfo">
                        <lcontrol:ApplicationUserControl 
                            DisplayName="{x:Bind DisplayName, Mode=OneWay}"
                            FullPath="{x:Bind FullPath, Mode=OneWay}"
                            ApplicationType="{x:Bind AppType, Mode=OneWay}"
                            RemoveCommandParameter="{Binding}"
                            RemoveCommand="{Binding DataContext.RemoveAppClickCommand, ElementName=MainDialog}"
                            Margin="0 2.5"/>
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>
        </Grid>
        <Grid Grid.Column="2" CornerRadius="5" HorizontalAlignment="Left">
            <Border CornerRadius="5" Background="{ThemeResource CardBackgroundFillColorSecondaryBrush}" BorderThickness="1" BorderBrush="{ThemeResource SurfaceStrokeColorFlyoutBrush}"/>
            <Grid HorizontalAlignment="Left">
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="auto"/>
                </Grid.RowDefinitions>
                <ScrollViewer Padding="10 10 10 10">
                    <StackPanel Spacing="5" Width="255">
                        <StackPanel x:Name="ClassicAppStackPanel">
                            <TextBlock l:Uids.Uid="AddClassicApplicationTextBlock" Style="{ThemeResource BodyStrongTextBlockStyle}"/>
                            <TextBlock l:Uids.Uid="AddClassicApplicationTipTextBlock" TextWrapping="Wrap"/>
                            <Grid HorizontalAlignment="Stretch">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="5"/>
                                    <ColumnDefinition Width="auto"/>
                                </Grid.ColumnDefinitions>
                                <TextBox x:Name="ClassicAppTextBox" HorizontalAlignment="Stretch" TextChanged="ClassicAppTextBox_TextChanged" MaxWidth="219"/>
                                <Button x:Name="FileChooseButton" l:Uids.Uid="FileChooseButton" Padding="6" Grid.Column="2" Height="32" Width="32" Click="FileChooseButton_Click">
                                    <FontIcon Glyph="&#xE8E5;" FontSize="16" />
                                </Button>
                            </Grid>
                        </StackPanel>

                        <TextBlock x:Name="Separator" l:Uids.Uid="ORSeparatorTextBlock" Style="{ThemeResource BodyStrongTextBlockStyle}" HorizontalAlignment="Center"/>

                        <StackPanel x:Name="UniversalAppStackPanel">
                            <TextBlock l:Uids.Uid="AddUniversalApplicationTextBlock" Style="{ThemeResource BodyStrongTextBlockStyle}"/>

                            <TextBlock l:Uids.Uid="AddUniversalApplicationTipTextBlock" TextWrapping="Wrap"/>
                            <Grid HorizontalAlignment="Stretch">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="5"/>
                                    <ColumnDefinition Width="auto"/>
                                </Grid.ColumnDefinitions>
                                <TextBox x:Name="UniversalAppTextBox" HorizontalAlignment="Stretch" TextChanged="UniversalAppTextBox_TextChanged" MaxWidth="219"/>
                                <Button x:Name="FolderChooseButton" l:Uids.Uid="FolderChooseButton" Padding="6" Grid.Column="2" Height="32" Width="32" Click="FolderChooseButton_Click">
                                    <FontIcon Glyph="&#xE8DA;" FontSize="16" />
                                </Button>
                            </Grid>
                        </StackPanel>

                        <Grid x:Name="ApplicationPreviewGrid" MinHeight="50" Width="255">
                            <Border Background="{ThemeResource ControlFillColorDefaultBrush}" CornerRadius="5" BorderBrush="{ThemeResource ControlStrokeColorOnAccentSecondaryBrush}" BorderThickness="1"/>
                            <StackPanel Orientation="Horizontal" Spacing="10" Margin="10 5">
                                <FontIcon Glyph="&#xE74C;" FontSize="16" VerticalAlignment="Center"/>
                                <TextBlock x:Name="ApplicationPreviewTextBlock" Style="{ThemeResource BodyStrongTextBlockStyle}" TextWrapping="Wrap" VerticalAlignment="Center" Width="210"/>
                            </StackPanel>
                        </Grid>
                    </StackPanel>
                </ScrollViewer>
                <Grid Grid.Row="1" >
                    <Border Background="{ThemeResource SolidBackgroundFillColorBaseBrush}"/>
                    <Button x:Name="AddApplicationButton" l:Uids.Uid="AddApplicationButton" Style="{ThemeResource AccentButtonStyle}" Margin="10 10 0 10" Click="AddApplicationButton_Click"/>
                </Grid>
            </Grid>
        </Grid>
        <Grid Grid.Row="1" Grid.ColumnSpan="2">
            <Button x:Name="CloseButton" l:Uids.Uid="CloseButton" Click="CloseButton_Click"/>
        </Grid>
    </Grid>
</ContentDialog>
