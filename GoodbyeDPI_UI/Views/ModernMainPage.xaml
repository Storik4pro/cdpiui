<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Name="MainPage"
    x:Class="CDPI_UI.Views.ModernMainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:CDPI_UI.Views"
    xmlns:lcontrols="using:CDPI_UI"
    xmlns:mpcontrols="using:CDPI_UI.Controls.MainPage"
    xmlns:ucontrols="using:CDPI_UI.Controls.Universal"
    xmlns:toolkit="using:CommunityToolkit.WinUI.Controls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    xmlns:l="using:WinUI3Localizer">

    <Grid Padding="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="250"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <Grid>
            <Grid x:Name="ComponentTilePlaceholder">
                <StackPanel Spacing="10">
                    <TextBlock l:Uids.Uid="WelcomeToProgramTextBlock" Style="{ThemeResource SubtitleTextBlockStyle}"/>
                    <StackPanel Orientation="Horizontal" Spacing="10">
                        <Button x:Name="ApplicationSetupHelperButton" Height="35" Click="ApplicationSetupHelperButton_Click">
                            <StackPanel Orientation="Horizontal" Spacing="10">
                                <FontIcon Glyph="&#xF4A5;" />
                                <TextBlock l:Uids.Uid="ApplicationSetupHelperTextBlock" VerticalAlignment="Center"/>
                            </StackPanel>
                        </Button>
                        <Button x:Name="GetNewComponentsFromStoreButton" Height="35" Click="GetNewComponentsFromStoreButton_Click">
                            <StackPanel Orientation="Horizontal" Spacing="10">
                                <BitmapIcon UriSource="ms-appx:///Assets/Icons/Store.png" Width="16" ShowAsMonochrome="True"/>
                                <TextBlock l:Uids.Uid="GetNewComponentsFromStoreTextBlock" VerticalAlignment="Center"/>
                            </StackPanel>
                        </Button>
                    </StackPanel>
                    <Grid x:Name="FlashlightTip">
                        <Border Background="{ThemeResource LayerFillColorDefaultBrush}" CornerRadius="10" BorderThickness="1" BorderBrush="{ThemeResource ControlStrokeColorOnAccentTertiaryBrush}"/>
                        <Grid Padding="10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="50"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <FontIcon Glyph="&#xE754;" />
                            <StackPanel Grid.Column="1">
                                <TextBlock l:Uids.Uid="/Flashlight/TipTextBlock" Style="{ThemeResource BodyStrongTextBlockStyle}"/>
                                <TextBlock l:Uids.Uid="/Flashlight/BeginApplicationSetupTipTextBlock" TextWrapping="Wrap"/>
                                <StackPanel Orientation="Horizontal" Spacing="10">
                                    <HyperlinkButton x:Name="LearnMoreAboutUIHyperlink" Padding="0" Click="LearnMoreAboutUIHyperlink_Click"/>
                                    <HyperlinkButton x:Name="FirstStepsHyperlink" Padding="0" Click="FirstStepsHyperlink_Click"/>
                                    <HyperlinkButton x:Name="AddingCustomSiteListsToConfigHyperlink" Padding="0" Click="AddingCustomSiteListsToConfigHyperlink_Click"/>
                                </StackPanel>
                            </StackPanel>
                        </Grid>
                    </Grid>
                </StackPanel>
            </Grid>
            <ucontrols:HorizontalScrollContainer x:Name="ComponentTilesScrollContainer" Visibility="Collapsed">
                <ucontrols:HorizontalScrollContainer.Source>
                    <GridView x:Name="MainGridView"
                              SelectionMode="None">
                        <GridView.ItemTemplate>
                            <DataTemplate x:DataType="local:ComponentTileModel">
                                <mpcontrols:ComponentTileUserControl Width="{x:Bind Width, Mode=OneWay}" 
                                                                     Height="{x:Bind Height, Mode=OneWay}" 
                                                                     StoreId="{x:Bind Id, Mode=OneWay}" 
                                                                     ImageUrl="{x:Bind ImageSource, Mode=OneWay}" />
                            </DataTemplate>
                        </GridView.ItemTemplate>
                        <GridView.ItemsPanel>
                            <ItemsPanelTemplate>
                                <StackPanel Orientation="Horizontal" Spacing="10"/>
                            </ItemsPanelTemplate>
                        </GridView.ItemsPanel>
                    </GridView>
                </ucontrols:HorizontalScrollContainer.Source>
            </ucontrols:HorizontalScrollContainer>
        </Grid>
        <Grid Grid.Row="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            <TextBlock l:Uids.Uid="QuickAccessTextBlock" Style="{ThemeResource SubtitleTextBlockStyle}" Margin="0 5 0 5"/>
            <Grid x:Name="WidgetPlaceholderGrid" Grid.Row="1" Visibility="Collapsed">
                <StackPanel VerticalAlignment="Center" Spacing="10">
                    <FontIcon Glyph="&#xECA5;"  FontSize="28" HorizontalAlignment="Center"/>
                    <TextBlock l:Uids.Uid="WidgetPlaceholderTextBlock" HorizontalAlignment="Center" Style="{ThemeResource BaseTextBlockStyle}"/>
                </StackPanel>
            </Grid>

            <Grid x:Name="WidgetGrid" Grid.Row="1">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="10"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="10"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                <Button x:Name="OpenStoreButton" Grid.Column="0" Grid.Row="0" HorizontalContentAlignment="Stretch" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Click="OpenStoreButton_Click">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="20"/>
                            <ColumnDefinition Width="10"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="20"/>
                        </Grid.ColumnDefinitions>
                        <BitmapIcon UriSource="ms-appx:///Assets/Icons/Store.png"  ShowAsMonochrome="True" Width="20" Height="20"/>
                        <StackPanel Grid.Column="2" Spacing="0">
                            <TextBlock Style="{ThemeResource BodyStrongTextBlockStyle}" l:Uids.Uid="StoreOpenMenuItem"/>
                            <TextBlock Style="{ThemeResource CaptionTextBlockStyle}" l:Uids.Uid="OpenStoreWidgetTipTextBlock" TextWrapping="Wrap"/>
                        </StackPanel>
                        <FontIcon Grid.Column="3" Glyph="&#xE8A7;" FontSize="12"/>
                    </Grid>
                </Button>
                <Button x:Name="OpenHelpButton" Grid.Column="2" Grid.Row="0" HorizontalContentAlignment="Stretch" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Click="OpenHelpButton_Click">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="20"/>
                            <ColumnDefinition Width="10"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="20"/>
                        </Grid.ColumnDefinitions>
                        <BitmapIcon UriSource="ms-appx:///Assets/Icons/Help.ico"  ShowAsMonochrome="False" Width="20" Height="20"/>
                        <StackPanel Grid.Column="2" Spacing="0">
                            <TextBlock Style="{ThemeResource BodyStrongTextBlockStyle}" l:Uids.Uid="OpenHelpWidgetTitleTextBlock"/>
                            <TextBlock Style="{ThemeResource CaptionTextBlockStyle}" l:Uids.Uid="OpenHelpWidgetTipTextBlock" TextWrapping="Wrap"/>
                        </StackPanel>
                        <FontIcon Grid.Column="3" Glyph="&#xE8A7;" FontSize="12"/>
                    </Grid>
                </Button>
                <Button x:Name="AskCommunityButton" Grid.Column="0" Grid.Row="2" HorizontalContentAlignment="Stretch" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Click="AskCommunityButton_Click">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="20"/>
                            <ColumnDefinition Width="10"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="20"/>
                        </Grid.ColumnDefinitions>
                        <FontIcon Glyph="&#xE8F2;" />
                        <StackPanel Grid.Column="2" Spacing="0">
                            <TextBlock Style="{ThemeResource BodyStrongTextBlockStyle}" l:Uids.Uid="AskCommunityWidgetTitleTextBlock"/>
                            <TextBlock Style="{ThemeResource CaptionTextBlockStyle}" l:Uids.Uid="AskCommunityWidgetTipTextBlock" TextWrapping="Wrap"/>
                        </StackPanel>
                        <FontIcon Grid.Column="3" Glyph="&#xE8A7;" FontSize="12"/>
                    </Grid>
                </Button>
                <Button x:Name="ReportProblemButton" Grid.Column="2" Grid.Row="2" HorizontalContentAlignment="Stretch" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Click="ReportProblemButton_Click">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="20"/>
                            <ColumnDefinition Width="10"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="20"/>
                        </Grid.ColumnDefinitions>
                        <BitmapIcon UriSource="ms-appx:///Assets/Icons/github.png"  ShowAsMonochrome="True" Width="20" Height="20"/>
                        <StackPanel Grid.Column="2" Spacing="0">
                            <TextBlock Style="{ThemeResource BodyStrongTextBlockStyle}" l:Uids.Uid="ReportABugTextBlock"/>
                            <TextBlock Style="{ThemeResource CaptionTextBlockStyle}" l:Uids.Uid="ReportABugWidgetTitleTextBlock" TextWrapping="Wrap"/>
                        </StackPanel>
                        <FontIcon Grid.Column="3" Glyph="&#xE8A7;" FontSize="12"/>
                    </Grid>
                </Button>
            </Grid>
            
            <ItemsRepeater x:Name="WidgetsItemsRepeater" Grid.Row="1">
                <ItemsRepeater.Layout>
                    <toolkit:StaggeredLayout ItemsStretch="Fill"
                                             ColumnSpacing="10"
                                             DesiredColumnWidth="400"/>
                </ItemsRepeater.Layout>
            </ItemsRepeater>
        </Grid>
    </Grid>
</Page>
